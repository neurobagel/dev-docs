
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Internal docs on topics relevant for developing and maintaining Neurobagel">
      
      
      
      
        <link rel="prev" href="../How%20we%20work/">
      
      
        <link rel="next" href="../Neurobagel%20Code%20of%20Conduct/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/logo/neurobagel_favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Neurobagel Release process - Neurobagel Developer Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="cyan" data-md-color-accent="deep-purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#neurobagel-release-process" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Neurobagel Developer Documentation" class="md-header__button md-logo" aria-label="Neurobagel Developer Documentation" data-md-component="logo">
      
  <img src="../../assets/images/logo/neurobagel_logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Neurobagel Developer Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Neurobagel Release process
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/neurobagel/dev-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Neurobagel Developer Documentation" class="md-nav__button md-logo" aria-label="Neurobagel Developer Documentation" data-md-component="logo">
      
  <img src="../../assets/images/logo/neurobagel_logo.png" alt="logo">

    </a>
    Neurobagel Developer Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/neurobagel/dev-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Process & Governance
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Process & Governance
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../How%20we%20work/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    How we work
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Release process
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Release process
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#when-to-release" class="md-nav__link">
    <span class="md-ellipsis">
      
        When to release
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auto-releasing-using-intuitauto" class="md-nav__link">
    <span class="md-ellipsis">
      
        Auto-releasing using intuit/auto
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Auto-releasing using intuit/auto">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#context" class="md-nav__link">
    <span class="md-ellipsis">
      
        Context
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#about-pr-labels" class="md-nav__link">
    <span class="md-ellipsis">
      
        About PR labels
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#automatically-creating-the-pr-labels-in-a-repo" class="md-nav__link">
    <span class="md-ellipsis">
      
        Automatically creating the PR labels in a repo
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#our-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Our configuration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notes-from-troubleshooting-automatic-release-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      
        Notes from troubleshooting automatic release workflow
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Notes from troubleshooting automatic release workflow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#problem" class="md-nav__link">
    <span class="md-ellipsis">
      
        Problem
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#working-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Working configuration
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-a-release" class="md-nav__link">
    <span class="md-ellipsis">
      
        Create a release
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auto-pushing-to-dockerhub-wip" class="md-nav__link">
    <span class="md-ellipsis">
      
        Auto-pushing to DockerHub [WIP]
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-release-manually-old" class="md-nav__link">
    <span class="md-ellipsis">
      
        How to release manually (OLD)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-release-notes-template-old" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example release notes template (OLD)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      
        Summary
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#whats-changed" class="md-nav__link">
    <span class="md-ellipsis">
      
        What's Changed
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="What&#39;s Changed">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#new-or-improved-features" class="md-nav__link">
    <span class="md-ellipsis">
      
        New or improved features ‚ú®
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#changes-to-the-data-model-for-inputsoutputs" class="md-nav__link">
    <span class="md-ellipsis">
      
        Changes to the data model for inputs/outputs
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#documentation-updates" class="md-nav__link">
    <span class="md-ellipsis">
      
        Documentation updates üìú
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bug-fixes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Bug fixes üõ†Ô∏è
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-changes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Other changes üßπ
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other-important-notes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Other important notes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Other important notes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#commiting-after-release-was-triggered" class="md-nav__link">
    <span class="md-ellipsis">
      
        Commiting after release was triggered
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Neurobagel%20Code%20of%20Conduct/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Code of Conduct
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Neurobagel%20PATs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Personal Access Tokens (PATs)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Development & Tooling
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Development & Tooling
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/Tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tools overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/Git%20Tricks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Git tricks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/Version%20compatibility/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Version compatibility
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Frontend & UI
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Frontend & UI
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/Query%20Tool/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Query Tool
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/Query%20Tool%20Result%20File%20Generation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Query Tool: Result file generation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/Nuxt%20Tricks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Nuxt tricks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/Vite%20tricks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Vite tricks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/CSS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CSS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/React/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    React
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../frontend/Zustand/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Zustand
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Testing & CI
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Testing & CI
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../testing/Cypress%20Vue%20Testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cypress Vue testing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../testing/Cypress%20Snippets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cypress snippets
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../testing/Cypress%20Tasks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cypress tasks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Deployment & Infrastructure
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Deployment & Infrastructure
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy/Docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Docker
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy/Dockerized%20NGINX%20deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dockerized NGINX deployment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy/Apache%20Jena%20Fuseki%20Deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Apache Jena / Fuseki
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy/Legacy%20Stardog%20graph%20backend%20deployment%20instructions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Legacy Stardog setup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy/Fabrique%20%28vGPU%20prep%20and%20other%20issues%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Fabrique (vGPU notes)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy/Setting%20up%20SSH%20keys/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Add public key for users
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy/Node-upgrade-after-release/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Nodes to redeploy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Backend & Security
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Backend & Security
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backend/API/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API notes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backend/Keycloak/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Keycloak (Auth)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backend/OAuth%20_%20OIDC%20dump/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OAuth / OIDC notes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backend/BIC%20node%20federation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    BIC node federation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Data model & Troubleshooting
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Data model & Troubleshooting
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data/Limitations%20of%20Neurobagel%20data%20model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Limitations of Neurobagel data model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data/Troubleshooting%20erroneous%20HC_Diagnosis%20query%20results/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Troubleshooting HC_Diagnosis query results
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#when-to-release" class="md-nav__link">
    <span class="md-ellipsis">
      
        When to release
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auto-releasing-using-intuitauto" class="md-nav__link">
    <span class="md-ellipsis">
      
        Auto-releasing using intuit/auto
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Auto-releasing using intuit/auto">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#context" class="md-nav__link">
    <span class="md-ellipsis">
      
        Context
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#about-pr-labels" class="md-nav__link">
    <span class="md-ellipsis">
      
        About PR labels
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#automatically-creating-the-pr-labels-in-a-repo" class="md-nav__link">
    <span class="md-ellipsis">
      
        Automatically creating the PR labels in a repo
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#our-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Our configuration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notes-from-troubleshooting-automatic-release-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      
        Notes from troubleshooting automatic release workflow
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Notes from troubleshooting automatic release workflow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#problem" class="md-nav__link">
    <span class="md-ellipsis">
      
        Problem
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#working-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Working configuration
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-a-release" class="md-nav__link">
    <span class="md-ellipsis">
      
        Create a release
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auto-pushing-to-dockerhub-wip" class="md-nav__link">
    <span class="md-ellipsis">
      
        Auto-pushing to DockerHub [WIP]
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-release-manually-old" class="md-nav__link">
    <span class="md-ellipsis">
      
        How to release manually (OLD)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-release-notes-template-old" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example release notes template (OLD)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      
        Summary
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#whats-changed" class="md-nav__link">
    <span class="md-ellipsis">
      
        What's Changed
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="What&#39;s Changed">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#new-or-improved-features" class="md-nav__link">
    <span class="md-ellipsis">
      
        New or improved features ‚ú®
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#changes-to-the-data-model-for-inputsoutputs" class="md-nav__link">
    <span class="md-ellipsis">
      
        Changes to the data model for inputs/outputs
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#documentation-updates" class="md-nav__link">
    <span class="md-ellipsis">
      
        Documentation updates üìú
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bug-fixes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Bug fixes üõ†Ô∏è
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-changes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Other changes üßπ
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other-important-notes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Other important notes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Other important notes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#commiting-after-release-was-triggered" class="md-nav__link">
    <span class="md-ellipsis">
      
        Commiting after release was triggered
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="neurobagel-release-process">Neurobagel Release process</h1>
<p>For all tools, our goal is to have the <code>main</code> branch releasable at all times.
That means:</p>
<ul>
<li>all linters and static tools are passing</li>
<li>all tests are passing</li>
<li>all new features since last release have appropriate documentation (as part of PR)</li>
<li>the build is successful</li>
</ul>
<p><strong>Note</strong>: For features that take a lot of work to implement,
having <code>main</code> always be releasable requires an extra step.
For example a feature to "make this experiment reproducible"
might take several PRs to implement. 
To still have <code>main</code> be in a releasable state,
we will have to hide the in-progress feature behind 
a <a href="https://www.atlassian.com/continuous-delivery/principles/feature-flags">feature flag</a>.</p>
<p>The goal is that we <strong>could</strong> release always,
but we <strong>choose</strong> to release only when it makes sense.
Related: the work to <strong>do</strong> an actual release should be minimal,
and only involve the actual release process:</p>
<ul>
<li>changelog editing</li>
<li>version increment picking</li>
<li>celebrating <img alt="üéâ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f389.svg" title=":tada:" /></li>
</ul>
<p>It should not include any fixes, changes, or the writing of new documentation.</p>
<h2 id="when-to-release">When to release</h2>
<p>We will decide when to make a release as a team.
The goal for releases is:</p>
<ul>
<li><strong>Release often</strong> - A release should not be a major thing that we only do every couple of months. </li>
<li><strong>Release regularly</strong> - As much as we can, the releases should be at regular intervals. This may mean that different tools have different release intervals.</li>
<li><strong>Release when it makes sense</strong> - The idea is that we only push released versions to our deployments. So not every merged PR will get deployed. But we will want to deploy and thus release whenever we fix an important bug or a new feature.</li>
</ul>
<h2 id="auto-releasing-using-intuitauto">Auto-releasing using <code>intuit/auto</code></h2>
<h3 id="context">Context</h3>
<ul>
<li>This is done using a workflow called <code>release.yaml</code> and the <code>.autorc</code> configuration file in each repo</li>
<li>Note that the workflow uses PATs (not <code>GITHUB_TOKEN</code>, which doesn't have sufficient permissions) that have, among other permissions, R+W permissions to both issues and pull requests</li>
</ul>
<h3 id="about-pr-labels">About PR labels</h3>
<ul>
<li><code>auto</code> uses custom labels applied to <strong>PRs</strong> in a repo to determine when a release is made, which PRs are included in the release (and under what CHANGELOG heading), and to calculate the version bump for the release (major/minor/patch)</li>
<li>Each of these PR labels has one associated <code>releaseType</code> (defined in <code>.autorc</code>) that basically describes the version bump that should happen if a release were to be made containing only a PR with that label applied, and also the version bump if the label were paired with others (of potentially different <code>releaseType</code>s) on the same PR<ul>
<li>Possible label <code>releaseType</code>s: "major", "minor", "patch", "skip", "none", "release" (<strong>note that these do not refer to the labels themselves, which can have different names</strong>)</li>
<li>Multiple labels can have the same <code>releaseType</code></li>
<li>Labels with a <code>releaseType</code> of "major"/"minor"/"patch" are called SEMVER labels - these are used to calculate the final version bump for a release</li>
</ul>
</li>
</ul>
<h3 id="automatically-creating-the-pr-labels-in-a-repo">Automatically creating the PR labels in a repo</h3>
<p>Note: as long as the label properties don't change, this step only needs to be done once in the <code>planning</code> repo, since the labels will then be propagated to all other repos via our label syncing workflow.</p>
<ol>
<li>
<p>Install auto using binary on local machine
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1"># replace the auto version if needed</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>curl<span class="w"> </span>-LJO<span class="w"> </span>https://github.com/intuit/auto/releases/download/v11.0.4/auto-linux.gz
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>gunzip<span class="w"> </span>auto-linux.gz<span class="w"> </span>~/auto
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>chmod<span class="w"> </span>+x<span class="w"> </span>~/auto
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="c1"># check that it works</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>~/auto<span class="w"> </span>--help
</span></code></pre></div></p>
</li>
<li>
<p><code>cd</code> into the repo in which you want to create the labels
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nb">cd</span><span class="w"> </span>neurobagel/planning
</span></code></pre></div></p>
</li>
<li>
<p>Ensure the <code>.autorc</code> file is available at the root of the repo</p>
</li>
<li>
<p>Create a <code>.env</code> file in the repo root with the variable <code>GH_TOKEN</code> containing the value of a PAT with repo R+W access to at least issues and code (contents)
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nv">GH_TOKEN</span><span class="o">=</span>value_of_your_pat_here
</span></code></pre></div></p>
</li>
<li>
<p>Run <code>auto create-labels</code> from the repo root</p>
</li>
<li>
<p>Check that the list of created labels corresponds to the ones in your <code>.autorc</code></p>
</li>
</ol>
<h3 id="our-configuration">Our configuration</h3>
<p>You can find our PR label configuration here: <a href="https://github.com/neurobagel/workflows/blob/main/template_configs/.autorc">https://github.com/neurobagel/workflows/blob/main/template_configs/.autorc</a>
The default PR label, if no labels are applied, is <code>pr-patch</code> (which also has <code>"releaseType": "patch"</code>).</p>
<p>Our current <code>auto</code> configuration only releases <em>when a PR with the <code>release</code> <strong>label</strong> applied has been merged</em>.</p>
<p>When this happens, all PRs that have been merged since the last release are collected and <code>auto</code> looks at the PR label(s) on each to figure out:
  - if the PR should be included in the changelog
    - if a PR has a label of <code>skip-release</code> (has <code>"releaseType": "skip"</code>) this always takes precedence over other SEMVER labels on the same PR
  - if so, what changelog heading it should go under (based "changelogTitle" label attribute in <code>.autorc</code>)</p>
<p>Finally, <code>auto</code> looks for the highest-priority <code>releaseType</code> among the included PRs based on their labels, and increments either the major, minor, or patch version accordingly.</p>
<h3 id="notes-from-troubleshooting-automatic-release-workflow">Notes from troubleshooting automatic release workflow</h3>
<ul>
<li>A non-default token (not <code>GITHUB_TOKEN</code>) needs to be used to create the actual release, otherwise the release is blocked from successfully triggering another workflow (e.g., building Docker image)</li>
<li>Besides the release, the changelog needs to be updated and committed to the default branch<ul>
<li>Because of our <code>main</code> branch protection rules (PR required, 1 approval required), we originally used the <code>protected-branch</code> plugin for auto, which auto-creates a PR for the changelog, and then auto-reviews it and merges it<ul>
<li>This requires a separate, additional token (possibly for a different user?) than the one used to create the release, b/c a PR cannot be approved by the PR author<ul>
<li>In our case, the <code>NB_PAT_RELEASE</code> and <code>NB_PAT_RELEASE_PROTECTED</code> tokens were created under different users, which worked out</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="problem">Problem</h4>
<ul>
<li>Because PRs for changelogs were now auto-approved &amp; merged immediately after creation, pre-commit CI (which <strong>always</strong> runs on every commit to a PR) would not have enough time to run checks before the PR is merged and would thus often fail on these PRs, leading to red checks on <code>main</code> = bad<ul>
<li>Relevant issue: <a href="https://github.com/neurobagel/workflows/issues/87">https://github.com/neurobagel/workflows/issues/87</a></li>
<li>Here, skip keywords for pre-commit CI did not have any effect because <a href="https://github.com/pre-commit-ci/issues/issues/224">they only work on main branch commits</a> (this is the difference between the <code>pre-commit - pr</code> and the <code>pre-commit - push</code> checks), not PRs</li>
<li>We needed a way to either push directly to the main branch (without needing to open a PR) from the wf, or force it to wait for the pre-commit CI</li>
</ul>
</li>
<li><strong>What didn't work</strong><ol>
<li>Configure <code>pre-commit - pr</code> as a <code>requiredStatusChecks</code> for <code>protected-branch</code> (<a href="https://www.npmjs.com/package/@auto-it/protected-branch?activeTab=readme#usage">https://www.npmjs.com/package/@auto-it/protected-branch?activeTab=readme#usage</a>), to try and force this check before the PR is merged<ul>
<li>Result: release failed: <code>requiredStatusChecks</code> relies on a token that has the <code>Checks</code> permission, which is currently not supported for user PATs (this is a <a href="https://github.com/orgs/community/discussions/129512">known issue</a> for fine-grained PATs) - only apps can have this permission<ul>
<li>classic user PATs also don't work for this</li>
</ul>
</li>
</ul>
</li>
<li>Make <code>pre-commit - pr</code> a required status check for PRs at the repo level (in branch protection settings)<ul>
<li>Result: release failed: workflow would error out because required pre-commit check was still pending</li>
</ul>
</li>
<li>Explicitly temporarily enable &amp; disable force pushes in release workflow, as described in <a href="https://github.com/intuit/auto/issues/1491#issuecomment-1610120918">https://github.com/intuit/auto/issues/1491#issuecomment-1610120918</a><ul>
<li>Result: release failed, with error that PR must be opened</li>
</ul>
</li>
<li>Creating a basic, no-code app <a href="https://github.com/organizations/neurobagel/settings/installations/52978124">"Neurobagel Bot"</a> (<code>neurobagel-bot</code>) under the Neurobagel organization to authenticate with, to try using an app installation access token for releasing + updating the changelog, following the <a href="https://docs.github.com/en/apps/creating-github-apps/authenticating-with-a-github-app/making-authenticated-api-requests-with-a-github-app-in-a-github-actions-workflow">GH docs</a>, and making sure it was allowed to bypass required PRs in the repo settings<ul>
<li>Result: release succeeded, but changelog checks still failed<ul>
<li><code>pre-commit</code> now was able to be triggered by the <code>protected-branch</code> plugin, but pre-commit CI would still run separately and would fail due to the PR being merged first</li>
</ul>
</li>
</ul>
</li>
</ol>
</li>
<li><strong>What worked</strong><ul>
<li>(it looks like this IS actually documented in the <a href="https://intuit.github.io/auto/docs/build-platforms/github-actions#running-with-branch-protection">auto docs</a> from <a href="https://github.com/intuit/auto/issues/2266#issuecomment-1532628040">this issue</a>, and I just missed it somehow...)</li>
<li>The PATs originally being used for the release wf belonged to org admins who should (theoretically) be allowed to bypass required PRs based on current rules<ul>
<li>Same for the bot app, which was allowed to bypass required PRs</li>
<li>So, it was strange when we removed the <code>protected-branch</code> plugin (which always creates a PR?), we were still getting the error in the wf failure that a PR was required</li>
</ul>
</li>
<li>The culprit was that a more privileged access token needed to be given to the earlier <code>actions/checkout</code> step itself, otherwise the limited default auth level (the basic GitHub token) is used and persists in subsequent steps. This prevented more privileged git commands (e.g., pushing directly to a protected branch) from succeeding in subsequent steps, even though those steps had an appropriate token</li>
<li>Refs:<ul>
<li><a href="https://github.com/marketplace/actions/checkout#checkout-v4">https://github.com/marketplace/actions/checkout#checkout-v4</a> (maybe worth looking into <code>persist-credentials: false</code>?)</li>
<li><a href="https://stackoverflow.com/a/72515781">https://stackoverflow.com/a/72515781</a></li>
<li><a href="https://stackoverflow.com/questions/63733822/cant-push-to-protected-branch-in-github-action">https://stackoverflow.com/questions/63733822/cant-push-to-protected-branch-in-github-action</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="working-configuration">Working configuration</h4>
<ul>
<li><code>neurobagel-bot</code> is installed in all repos</li>
<li>Add <code>neurobagel-bot</code> as app allowed to bypass required PRs in repo settings<ul>
<li>ensure that the app ID is stored as an actions variable, and private key as an actions secret</li>
</ul>
</li>
<li>Remove <code>protected-branch</code> plugin from auto (so custom reviewer PAT also no longer required)</li>
<li>In release.yaml, obtain &amp; use installation access token for <code>neurobagel-bot</code> in both <code>actions/checkout</code> and subsequent steps for the release creation</li>
</ul>
<p>Related issues:
- <a href="https://github.com/neurobagel/planning/issues/64">https://github.com/neurobagel/planning/issues/64</a></p>
<h3 id="create-a-release">Create a release</h3>
<ol>
<li>To ensure that PRs since the last release end up under the appropriate heading in the changelog, when opening a PR, the author should always manually apply at least one PR label from our <code>.autorc</code> config (note: the <code>pr-patch</code> label is used by default behind the hood if no labels are applied, but we should aim to intentionally apply these to avoid having to modify changelog sections after a release)<ul>
<li>For most changes, the author should choose the most relevant* label starting with the <code>pr-</code> prefix</li>
<li>If a PR should be excluded from the changelog (e.g., some small automation PR that is not user-relevant), the 'skip-release' label should be applied</li>
</ul>
</li>
<li>To auto-release after the PR you are working on is merged, apply the <code>release</code> label to the PR along with a relevant <code>pr-</code> prefixed label (note to double check: if no <code>pr-</code> labels are applied, the default one used <em>should</em> be <code>pr-patch</code>)</li>
<li>To include extra release notes in the changelog, you can do so by modifying the PR description following these instructions: <a href="https://intuit.github.io/auto/docs/generated/changelog#additional-release-notes">https://intuit.github.io/auto/docs/generated/changelog#additional-release-notes</a></li>
<li>Once your release PR is merged, check that the release was created successfully with the expected tag + SEMVER (you can also double check that the <code>release.yaml</code> workflow in the repo succeeded), and double check the changelog</li>
</ol>
<p>*Each PR included in the release will be assigned to a single changelog section based upon the applied label with the highest <code>releaseType</code> that has a <code>changelogTitle</code>. 
So, be careful when applying multiple <code>pr-</code> labels to the same PR - make sure that the label with the highest priority <code>releaseType</code> actually has the changelog section you want the PR to be listed under.
See also <a href="https://intuit.github.io/auto/docs/configuration/autorc#changelog-titles">https://intuit.github.io/auto/docs/configuration/autorc#changelog-titles</a>)</p>
<p>Docs: <a href="https://intuit.github.io/auto/docs">https://intuit.github.io/auto/docs</a></p>
<h2 id="auto-pushing-to-dockerhub-wip">Auto-pushing to DockerHub [WIP]</h2>
<p>Once you have made a new release, 
a new GH workflow will start to:</p>
<ol>
<li>Build a new Docker image from the tagged commit</li>
<li>Ensure that the build and test succeed (if not -&gt; <img alt="üõë" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f6d1.svg" title=":stop_sign:" /> -&gt; <img alt="üò±" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f631.svg" title=":scream:" /> -&gt; <img alt="üõ†" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f6e0.svg" title=":hammer_and_wrench:" />)</li>
<li>Tag the new Docker image with two tags:<ul>
<li><code>latest</code> to show that it is the latest released version</li>
<li><code>&lt;version&gt;</code> to show that it is the specified version</li>
</ul>
</li>
<li>Push the Docker image to docker hub</li>
<li>(where applicable) -&gt; push the new version to production<ul>
<li>this may be a manual process</li>
</ul>
</li>
</ol>
<p>If we encounter a bug or notice things failing somewhere during this process, fixing this bug becomes the top priority for everyone. The fix for the bug becomes the next release and then gets deployed. While the fix is being worked on we will deploy <code>:oldstable</code>.</p>
<h2 id="how-to-release-manually-old">How to release manually (OLD)</h2>
<p>At any given moment, the <code>main</code> branch is in a releasable state (see above).
To actually make a release, we use the normal <a href="https://docs.github.com/en/repositories/releasing-projects-on-github/managing-releases-in-a-repository?tool=webui">GitHub release workflow</a>.
Specifically:</p>
<ol>
<li>Click the "new Release" button</li>
<li>Add a new "tag"<ul>
<li>the tag has to follow semantic versioning: <a href="https://semver.org/">https://semver.org/</a> (see below)</li>
<li>check out the changelog (see below) to decide whether to make a patch, minor, or major version increase</li>
</ul>
</li>
<li>Add a title. The title has to match the "tag"<ul>
<li>i.e. for a new release called <code>"v0.2.4"</code> the Release title would also be <code>"v0.2.4"</code></li>
</ul>
</li>
<li>Use the "generate release notes" button to add the <code>git log</code> since the last release<ul>
<li>This also adds a section about new contributors!</li>
</ul>
</li>
<li>Edit the changelog (see also the <a href="https://github.com/neurobagel/documentation/wiki/Release-process/#example-release-notes-template">Example release notes template</a>)<ul>
<li>for minor and major versions (optional for patches) add a short description of the release on top of the changelog</li>
<li>e.g. "This release introduces new functionality for EEG data" or "This release introduces a breaking change in the XYZ workflow ..."</li>
<li>sort the changelog by type of change (i.e. a section with all of the <code>[FIX]</code> changes, one for all the <code>[FEAT]</code>, and so on)</li>
<li>remove irrelevant changes (e.g. dependabot version bumps?)</li>
</ul>
</li>
<li>Store the release as a draft</li>
<li>Discuss the ready-to-go release during standup<ul>
<li>gives folks a chance to take a last look</li>
<li>possibility for feedback on the release notes</li>
</ul>
</li>
<li>Release if no objections <img alt="üéâ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f389.svg" title=":tada:" /> </li>
</ol>
<h2 id="example-release-notes-template-old">Example release notes template (OLD)</h2>
<h2 id="summary">Summary</h2>
<p><em>This release introduces X.</em>
<em>This release includes a breaking change to Y.</em></p>
<h2 id="whats-changed">What's Changed</h2>
<p><em>(Aim to group changes of the same type/prefix)</em></p>
<h3 id="new-or-improved-features">New or improved features ‚ú®</h3>
<h3 id="changes-to-the-data-model-for-inputsoutputs">Changes to the data model for inputs/outputs <img alt="‚öô" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2699.svg" title=":gear:" /></h3>
<h3 id="documentation-updates">Documentation updates üìú</h3>
<h3 id="bug-fixes">Bug fixes üõ†Ô∏è</h3>
<h3 id="other-changes">Other changes üßπ</h3>
<h2 id="other-important-notes">Other important notes</h2>
<h3 id="commiting-after-release-was-triggered">Commiting after release was triggered</h3>
<p>If a commit is added to the <code>main</code> branch (or whichever branch is configured to release off of) after the release workflow was triggered and before it finishes, auto will create the tag for the release but it will error out and won't finalize the release to avoid collisions. See <a href="https://github.com/orgs/neurobagel/projects/1/views/34?pane=issue&amp;itemId=91440269&amp;issue=neurobagel%7Cquery-tool%7C410">this query tool issue</a> for more details.</p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../How%20we%20work/" class="md-footer__link md-footer__link--prev" aria-label="Previous: How we work">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                How we work
              </div>
            </div>
          </a>
        
        
          
          <a href="../Neurobagel%20Code%20of%20Conduct/" class="md-footer__link md-footer__link--next" aria-label="Next: Code of Conduct">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Code of Conduct
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.footer"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>